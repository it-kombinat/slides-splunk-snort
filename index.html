	<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>>Splunk Demo - Ansible Play to install Splunk as Container and onboarding Snort and Cowrie</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/solarized.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>SpaaS with Ansible</h1>
					<img height="40%" width="40%" src="images/ansible-splunk.png" style="border: 0; box-shadow: none"/>
					<h3>Deploying Splunk (Splunk as a Service), Snort and Cowrie with Ansible</h3>
				</section>
				<section data-markdown>
				    <script type="text/template">
					# Martin

					#[@it-kombinat](https://www.twitter.com/it-kombinat)
					</script>
				</section>
                                <section>
				        <section>
                                        <h2>Splunk Deployment on EC2 with Ansible</h2>
                                        <img height="100%" width="100%" src="images/ec2-setup-snort-cowrie.png" style="border: 0; box-shadow: none"/>
				        </section>
					<section data-markdown>
					<script type="text/template">
					## Characteristics of Cloud Computing
					- On-demand self-service
					- Broad network access
					- Resource pooling
					- Rapid elasticity
					- Measured service
					</script>
                                        </section>
					<section>
                                        <!-- <h2>AWS EC2 Architecture</h2> -->
                                              <img height="100%" width="100%" src="images/aws-ec2-architecture.jpg" style="border: 0; box-shadow: none"/>
                                        </section>
                                        <section data-markdown>
                                        <script type="text/template">
                                        ## Amazon Elastic Compute Cloud
                                        - EC2 uses Xen virtualization. Each virtual machine, called an “instance”
                                        - AMI - Amazon Machine Image
                                        - Security Groups - acts as a virtual firewall to control inbound and outbound traffic
                                        - Key Pairs - EC2 uses public - key cryptography
                                        </script>
                                        </section>
					<section>
                                        <h2>Availabilty Zones and Regions</h2>
					 <img height="80%" width="80%" src="images/vpc-az-regions.png" style="border: 0; box-shadow: none"/>
                                        </section>
					<section data-markdown>
                                        <script type="text/template">
                                        ## Availability Zone Characteristics and Best practice
                                        - Distinct physical location
                                        - Low-latency network connections between AZ
                                        - Independent power, cooling, network, security
                                        -> Always partition app stacks across 2 or more AZs
					-> ELB across instances in multiple AZs
                                        </script>
                                        </section>
					 <section data-markdown>
                                        <script type="text/template">
                                        ## Region Characteristics and Best practice
                                        - Functionally separate
                                        - Composed of 2 or more AZs
                                        - Connected via the public internet 
                                        -> Use region to have functionality geographically close to customers
					-> Comply with national laws and practices
					-> Implement a DR strategy
                                        </script>
                                        </section>
                                </section>
				    <section data-markdown>
                                    <script type="text/template">
                                    ## Running Splunk in a Container
                                    - Apps for SNORT, Cowrie and Docker pre-installed in Docker [Image](https://hub.docker.com/r/stackware/spl)
                                    - HTTP Event Collector (HEC) enabled and configured
                                    - pre-configured input.conf and props.conf 
                                    </script>
                               </section>
					<section>
					 <h2>Splunk Sources Onborading</h2>
					 <img height="100%" width="100%" src="images/splunk-sources.jpg" style="border: 0; box-shadow: none"/>
				  </section>
                                <section data-markdown>
                                         <script type="text/template">
                                         ## Badguy - Attack simulation
                                         - Attack simulation with THC-Hydra
                                         - SSH root user attack simulation against Honeypot (Cowrie)
                                         - Docker [Image](https://github.com/it-kombinat/badguy) with all Dependencies
                                         </script>
                                       </section>
 				 <section data-markdown>
                                        <script type="text/template">
                                                <h1 style="font-size: 800%"> Demo</h1>
                                                <h2 style="font-size: 400%"> See it in [Action](https://github.com/it-kombinat/splunk-demo) ... </h2>
                                        </script>
									   </section>
								<section data-markdown>
										<script type="text/template">
										## Demo Walkthrough
										- Provisioning EC2 Instance - Splunk as a Service (SpaaS)
										- Deploying SpaaS + Snort and Cowrie - Onboarding
										- Provisioning EC2 Instance for Badguy
										- Password Brute-Force Attacking by Badguy
										- Performing Dashboard searches and Honeypot interaction
										</script>
									</section>
				        <section data-markdown>
                                        ## Splunk props.conf - Settings for SNORT
                                        <pre><code>
					[source::tcp:1514]
					SHOULD_LINEMERGE=true
					BREAK_ONLY_BEFORE = \[\*\*\] \[\d+\:\d+\:\d+\]
					TIME_PREFIX = (?=\d+/\d+)
					TIME_FORMAT = %m/%d-%T.%6N
                                        </code></pre>
                                        </section>
                                <section data-markdown>
				        <script type="text/template">
                                        ## Generating Artificial Snort Alerts
                                        ```groovy
                                        nmap -Pn -p 22 snort-hostname/ipadddress
                                        ```
                                        </script>
									 </section>
								<section data-markdown>
                                        <script type="text/template">
                                        ## Splunk search - Badguy container logs, password attempt
                                        ```groovy
                                        `macro_docker_logs` host=* docker_container_id=* docker_stream=* (docker_labels="*" OR host="*") docker_container_unique_name="badguy*"| table _time, docker_container_unique_name, docker_stream, _raw
                                        ```
                                        </script>
									 </section>
								<section data-markdown>
                                        <script type="text/template">
                                        <h2 style="font-size: 400%"> Thank you for your attention!</h2>
                                        </script>
									</section>
				<section data-markdown>
					<script type="text/template">
					## Many thanks to
					- [github.com/mrlesmithjr](https://github.com/mrlesmithjr/ansible-snort)
					- [www.cowrie.org](http://www.cowrie.org)
					</script>
				</section>
</section>
</div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
